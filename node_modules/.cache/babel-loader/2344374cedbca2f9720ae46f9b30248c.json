{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport { env } from './env';\nvar cache = new WeakMap();\nexport function useSidecar(importer, effect) {\n  var options = effect && effect.options || {};\n\n  if (env.isNode && !options.ssr) {\n    return [null, null];\n  }\n\n  var couldUseCache = env.forceCache || env.isNode && !!options.ssr || !options.async;\n\n  var _a = useState(couldUseCache ? function () {\n    return cache.get(importer);\n  } : undefined),\n      Car = _a[0],\n      setCar = _a[1];\n\n  var _b = useState(null),\n      error = _b[0],\n      setError = _b[1];\n\n  useEffect(function () {\n    if (!Car) {\n      importer().then(function (car) {\n        var resolved = effect ? effect.read() : car.default || car;\n\n        if (!resolved) {\n          console.error('Sidecar error: with importer', importer);\n          var error_1;\n\n          if (effect) {\n            console.error('Sidecar error: with medium', effect);\n            error_1 = new Error('Sidecar medium was not found');\n          } else {\n            error_1 = new Error('Sidecar was not found in exports');\n          }\n\n          setError(function () {\n            return error_1;\n          });\n          throw error_1;\n        }\n\n        cache.set(importer, resolved);\n        setCar(function () {\n          return resolved;\n        });\n      }, function (e) {\n        return setError(function () {\n          return e;\n        });\n      });\n    }\n  }, []);\n  return [Car, error];\n}\n;","map":{"version":3,"names":["useState","useEffect","env","cache","WeakMap","useSidecar","importer","effect","options","isNode","ssr","couldUseCache","forceCache","async","_a","get","undefined","Car","setCar","_b","error","setError","then","car","resolved","read","default","console","error_1","Error","set","e"],"sources":["/Users/santiagotonoli/Desktop/Portfolio/node_modules/use-sidecar/dist/es2015/hook.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { env } from './env';\nvar cache = new WeakMap();\nexport function useSidecar(importer, effect) {\n    var options = effect && effect.options || {};\n    if (env.isNode && !options.ssr) {\n        return [null, null];\n    }\n    var couldUseCache = env.forceCache || (env.isNode && !!options.ssr) || (!options.async);\n    var _a = useState(couldUseCache ? function () { return cache.get(importer); } : undefined), Car = _a[0], setCar = _a[1];\n    var _b = useState(null), error = _b[0], setError = _b[1];\n    useEffect(function () {\n        if (!Car) {\n            importer()\n                .then(function (car) {\n                var resolved = effect ? effect.read() : (car.default || car);\n                if (!resolved) {\n                    console.error('Sidecar error: with importer', importer);\n                    var error_1;\n                    if (effect) {\n                        console.error('Sidecar error: with medium', effect);\n                        error_1 = new Error('Sidecar medium was not found');\n                    }\n                    else {\n                        error_1 = new Error('Sidecar was not found in exports');\n                    }\n                    setError(function () { return error_1; });\n                    throw error_1;\n                }\n                cache.set(importer, resolved);\n                setCar(function () { return resolved; });\n            }, function (e) { return setError(function () { return e; }); });\n        }\n    }, []);\n    return [Car, error];\n}\n;\n"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,GAAT,QAAoB,OAApB;AACA,IAAIC,KAAK,GAAG,IAAIC,OAAJ,EAAZ;AACA,OAAO,SAASC,UAAT,CAAoBC,QAApB,EAA8BC,MAA9B,EAAsC;EACzC,IAAIC,OAAO,GAAGD,MAAM,IAAIA,MAAM,CAACC,OAAjB,IAA4B,EAA1C;;EACA,IAAIN,GAAG,CAACO,MAAJ,IAAc,CAACD,OAAO,CAACE,GAA3B,EAAgC;IAC5B,OAAO,CAAC,IAAD,EAAO,IAAP,CAAP;EACH;;EACD,IAAIC,aAAa,GAAGT,GAAG,CAACU,UAAJ,IAAmBV,GAAG,CAACO,MAAJ,IAAc,CAAC,CAACD,OAAO,CAACE,GAA3C,IAAoD,CAACF,OAAO,CAACK,KAAjF;;EACA,IAAIC,EAAE,GAAGd,QAAQ,CAACW,aAAa,GAAG,YAAY;IAAE,OAAOR,KAAK,CAACY,GAAN,CAAUT,QAAV,CAAP;EAA6B,CAA9C,GAAiDU,SAA/D,CAAjB;EAAA,IAA4FC,GAAG,GAAGH,EAAE,CAAC,CAAD,CAApG;EAAA,IAAyGI,MAAM,GAAGJ,EAAE,CAAC,CAAD,CAApH;;EACA,IAAIK,EAAE,GAAGnB,QAAQ,CAAC,IAAD,CAAjB;EAAA,IAAyBoB,KAAK,GAAGD,EAAE,CAAC,CAAD,CAAnC;EAAA,IAAwCE,QAAQ,GAAGF,EAAE,CAAC,CAAD,CAArD;;EACAlB,SAAS,CAAC,YAAY;IAClB,IAAI,CAACgB,GAAL,EAAU;MACNX,QAAQ,GACHgB,IADL,CACU,UAAUC,GAAV,EAAe;QACrB,IAAIC,QAAQ,GAAGjB,MAAM,GAAGA,MAAM,CAACkB,IAAP,EAAH,GAAoBF,GAAG,CAACG,OAAJ,IAAeH,GAAxD;;QACA,IAAI,CAACC,QAAL,EAAe;UACXG,OAAO,CAACP,KAAR,CAAc,8BAAd,EAA8Cd,QAA9C;UACA,IAAIsB,OAAJ;;UACA,IAAIrB,MAAJ,EAAY;YACRoB,OAAO,CAACP,KAAR,CAAc,4BAAd,EAA4Cb,MAA5C;YACAqB,OAAO,GAAG,IAAIC,KAAJ,CAAU,8BAAV,CAAV;UACH,CAHD,MAIK;YACDD,OAAO,GAAG,IAAIC,KAAJ,CAAU,kCAAV,CAAV;UACH;;UACDR,QAAQ,CAAC,YAAY;YAAE,OAAOO,OAAP;UAAiB,CAAhC,CAAR;UACA,MAAMA,OAAN;QACH;;QACDzB,KAAK,CAAC2B,GAAN,CAAUxB,QAAV,EAAoBkB,QAApB;QACAN,MAAM,CAAC,YAAY;UAAE,OAAOM,QAAP;QAAkB,CAAjC,CAAN;MACH,CAlBD,EAkBG,UAAUO,CAAV,EAAa;QAAE,OAAOV,QAAQ,CAAC,YAAY;UAAE,OAAOU,CAAP;QAAW,CAA1B,CAAf;MAA6C,CAlB/D;IAmBH;EACJ,CAtBQ,EAsBN,EAtBM,CAAT;EAuBA,OAAO,CAACd,GAAD,EAAMG,KAAN,CAAP;AACH;AACD"},"metadata":{},"sourceType":"module"}