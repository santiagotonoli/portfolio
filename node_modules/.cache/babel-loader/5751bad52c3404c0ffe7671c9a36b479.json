{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { useEffect, useCallback, useRef, useReducer, useMemo } from 'react';\nimport useSSR from 'use-ssr';\nimport useRefState from 'urs';\nimport { HTTPMethod, CachePolicies } from './types';\nimport useFetchArgs from './useFetchArgs';\nimport doFetchArgs from './doFetchArgs';\nimport { invariant, tryGetData, toResponseObject, useDeepCallback, isFunction, sleep, makeError } from './utils';\nimport useCache from './useCache';\nvar CACHE_FIRST = CachePolicies.CACHE_FIRST;\n\nfunction useFetch() {\n  var _this = this;\n\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  var _a = useFetchArgs.apply(void 0, args),\n      host = _a.host,\n      path = _a.path,\n      customOptions = _a.customOptions,\n      requestInit = _a.requestInit,\n      dependencies = _a.dependencies;\n\n  var cacheLife = customOptions.cacheLife,\n      cachePolicy = customOptions.cachePolicy,\n      // 'cache-first' by default\n  interceptors = customOptions.interceptors,\n      onAbort = customOptions.onAbort,\n      onError = customOptions.onError,\n      onNewData = customOptions.onNewData,\n      onTimeout = customOptions.onTimeout,\n      perPage = customOptions.perPage,\n      persist = customOptions.persist,\n      responseType = customOptions.responseType,\n      retries = customOptions.retries,\n      retryDelay = customOptions.retryDelay,\n      retryOn = customOptions.retryOn,\n      suspense = customOptions.suspense,\n      timeout = customOptions.timeout,\n      defaults = __rest(customOptions, [\"cacheLife\", \"cachePolicy\", \"interceptors\", \"onAbort\", \"onError\", \"onNewData\", \"onTimeout\", \"perPage\", \"persist\", \"responseType\", \"retries\", \"retryDelay\", \"retryOn\", \"suspense\", \"timeout\"]);\n\n  var cache = useCache({\n    persist: persist,\n    cacheLife: cacheLife,\n    cachePolicy: cachePolicy\n  });\n  var isServer = useSSR().isServer;\n  var controller = useRef();\n  var res = useRef({});\n  var data = useRef(defaults.data);\n  var timedout = useRef(false);\n  var attempt = useRef(0);\n  var error = useRef();\n  var hasMore = useRef(true);\n  var suspenseStatus = useRef('pending');\n  var suspender = useRef();\n  var mounted = useRef(false);\n\n  var _b = useRefState(defaults.loading),\n      loading = _b[0],\n      setLoading = _b[1];\n\n  var forceUpdate = useReducer(function () {\n    return {};\n  }, [])[1];\n  var makeFetch = useDeepCallback(function (method) {\n    var doFetch = function (routeOrBody, body) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var theController, _a, url, options, response, timer, newData, newRes, _b, _c, opts, shouldRetry, _d, _e, theData, err_1, opts, shouldRetry, _f, _g, theData;\n\n        return __generator(this, function (_h) {\n          switch (_h.label) {\n            case 0:\n              if (isServer) return [2\n              /*return*/\n              ]; // for now, we don't do anything on the server\n\n              controller.current = new AbortController();\n              controller.current.signal.onabort = onAbort;\n              theController = controller.current;\n              return [4\n              /*yield*/\n              , doFetchArgs(requestInit, method, theController, cacheLife, cache, host, path, routeOrBody, body, interceptors.request)];\n\n            case 1:\n              _a = _h.sent(), url = _a.url, options = _a.options, response = _a.response;\n              error.current = undefined; // don't perform the request if there is no more data to fetch (pagination)\n\n              if (perPage > 0 && !hasMore.current && !error.current) return [2\n              /*return*/\n              , data.current];\n              if (!suspense) setLoading(true);\n              timer = timeout && setTimeout(function () {\n                timedout.current = true;\n                theController.abort();\n                if (onTimeout) onTimeout();\n              }, timeout);\n              _h.label = 2;\n\n            case 2:\n              _h.trys.push([2, 17, 23, 24]);\n\n              if (!(response.isCached && cachePolicy === CACHE_FIRST)) return [3\n              /*break*/\n              , 3];\n              newRes = response.cached;\n              return [3\n              /*break*/\n              , 5];\n\n            case 3:\n              return [4\n              /*yield*/\n              , fetch(url, options)];\n\n            case 4:\n              newRes = _h.sent().clone();\n              _h.label = 5;\n\n            case 5:\n              res.current = newRes.clone();\n              return [4\n              /*yield*/\n              , tryGetData(newRes, defaults.data, responseType)];\n\n            case 6:\n              newData = _h.sent();\n              res.current.data = onNewData(data.current, newData);\n              _b = res;\n              if (!interceptors.response) return [3\n              /*break*/\n              , 8];\n              return [4\n              /*yield*/\n              , interceptors.response({\n                response: res.current\n              })];\n\n            case 7:\n              _c = _h.sent();\n              return [3\n              /*break*/\n              , 9];\n\n            case 8:\n              _c = res.current;\n              _h.label = 9;\n\n            case 9:\n              _b.current = _c;\n              invariant('data' in res.current, 'You must have `data` field on the Response returned from your `interceptors.response`');\n              data.current = res.current.data;\n              opts = {\n                attempt: attempt.current,\n                response: newRes\n              }; // if we just have `retries` set with NO `retryOn` then\n              // automatically retry on fail until attempts run out\n\n              _d = !isFunction(retryOn) && Array.isArray(retryOn) && retryOn.length < 1 && (newRes === null || newRes === void 0 ? void 0 : newRes.ok) === false // otherwise only retry when is specified\n              || Array.isArray(retryOn) && retryOn.includes(newRes.status);\n              if (_d) // if we just have `retries` set with NO `retryOn` then\n                // automatically retry on fail until attempts run out\n                return [3\n                /*break*/\n                , 12];\n              _e = isFunction(retryOn);\n              if (!_e) return [3\n              /*break*/\n              , 11];\n              return [4\n              /*yield*/\n              , retryOn(opts)];\n\n            case 10:\n              _e = _h.sent();\n              _h.label = 11;\n\n            case 11:\n              _d = _e;\n              _h.label = 12;\n\n            case 12:\n              shouldRetry = _d && retries > 0 && retries > attempt.current;\n              if (!shouldRetry) return [3\n              /*break*/\n              , 14];\n              return [4\n              /*yield*/\n              , retry(opts, routeOrBody, body)];\n\n            case 13:\n              theData = _h.sent();\n              return [2\n              /*return*/\n              , theData];\n\n            case 14:\n              if (!(cachePolicy === CACHE_FIRST)) return [3\n              /*break*/\n              , 16];\n              return [4\n              /*yield*/\n              , cache.set(response.id, newRes.clone())];\n\n            case 15:\n              _h.sent();\n\n              _h.label = 16;\n\n            case 16:\n              if (Array.isArray(data.current) && !!(data.current.length % perPage)) hasMore.current = false;\n              return [3\n              /*break*/\n              , 24];\n\n            case 17:\n              err_1 = _h.sent();\n              if (attempt.current >= retries && timedout.current) error.current = makeError('AbortError', 'Timeout Error');\n              opts = {\n                attempt: attempt.current,\n                error: err_1\n              }; // if we just have `retries` set with NO `retryOn` then\n              // automatically retry on fail until attempts run out\n\n              _f = !isFunction(retryOn) && Array.isArray(retryOn) && retryOn.length < 1;\n              if (_f) // if we just have `retries` set with NO `retryOn` then\n                // automatically retry on fail until attempts run out\n                return [3\n                /*break*/\n                , 20];\n              _g = isFunction(retryOn);\n              if (!_g) return [3\n              /*break*/\n              , 19];\n              return [4\n              /*yield*/\n              , retryOn(opts)];\n\n            case 18:\n              _g = _h.sent();\n              _h.label = 19;\n\n            case 19:\n              _f = _g;\n              _h.label = 20;\n\n            case 20:\n              shouldRetry = _f && retries > 0 && retries > attempt.current;\n              if (!shouldRetry) return [3\n              /*break*/\n              , 22];\n              return [4\n              /*yield*/\n              , retry(opts, routeOrBody, body)];\n\n            case 21:\n              theData = _h.sent();\n              return [2\n              /*return*/\n              , theData];\n\n            case 22:\n              if (err_1.name !== 'AbortError') {\n                error.current = err_1;\n              }\n\n              return [3\n              /*break*/\n              , 24];\n\n            case 23:\n              timedout.current = false;\n              if (timer) clearTimeout(timer);\n              controller.current = undefined;\n              return [7\n              /*endfinally*/\n              ];\n\n            case 24:\n              if (newRes && !newRes.ok && !error.current) error.current = makeError(newRes.status, newRes.statusText);\n              if (!suspense) setLoading(false);\n              if (attempt.current === retries) attempt.current = 0;\n              if (error.current) onError({\n                error: error.current\n              });\n              return [2\n              /*return*/\n              , data.current];\n          }\n        });\n      });\n    }; // end of doFetch()\n\n\n    var retry = function (opts, routeOrBody, body) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var delay, d;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              delay = isFunction(retryDelay) ? retryDelay(opts) : retryDelay;\n\n              if (!(Number.isInteger(delay) && delay >= 0)) {\n                console.error('retryDelay must be a number >= 0! If you\\'re using it as a function, it must also return a number >= 0.');\n              }\n\n              attempt.current++;\n              if (!delay) return [3\n              /*break*/\n              , 2];\n              return [4\n              /*yield*/\n              , sleep(delay)];\n\n            case 1:\n              _a.sent();\n\n              _a.label = 2;\n\n            case 2:\n              return [4\n              /*yield*/\n              , doFetch(routeOrBody, body)];\n\n            case 3:\n              d = _a.sent();\n              return [2\n              /*return*/\n              , d];\n          }\n        });\n      });\n    };\n\n    if (suspense) {\n      return function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        return __awaiter(_this, void 0, void 0, function () {\n          var newData;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                suspender.current = doFetch.apply(void 0, args).then(function (newData) {\n                  suspenseStatus.current = 'success';\n                  return newData;\n                }, function () {\n                  suspenseStatus.current = 'error';\n                });\n                forceUpdate();\n                return [4\n                /*yield*/\n                , suspender.current];\n\n              case 1:\n                newData = _a.sent();\n                return [2\n                /*return*/\n                , newData];\n            }\n          });\n        });\n      };\n    }\n\n    return doFetch;\n  }, [isServer, onAbort, requestInit, host, path, interceptors, cachePolicy, perPage, timeout, persist, cacheLife, onTimeout, defaults.data, onNewData, forceUpdate, suspense]);\n  var post = useCallback(makeFetch(HTTPMethod.POST), [makeFetch]);\n  var del = useCallback(makeFetch(HTTPMethod.DELETE), [makeFetch]);\n  var request = useMemo(function () {\n    return Object.defineProperties({\n      get: makeFetch(HTTPMethod.GET),\n      post: post,\n      patch: makeFetch(HTTPMethod.PATCH),\n      put: makeFetch(HTTPMethod.PUT),\n      options: makeFetch(HTTPMethod.OPTIONS),\n      head: makeFetch(HTTPMethod.HEAD),\n      connect: makeFetch(HTTPMethod.CONNECT),\n      trace: makeFetch(HTTPMethod.TRACE),\n      del: del,\n      delete: del,\n      abort: function () {\n        return controller.current && controller.current.abort();\n      },\n      query: function (query, variables) {\n        return post({\n          query: query,\n          variables: variables\n        });\n      },\n      mutate: function (mutation, variables) {\n        return post({\n          mutation: mutation,\n          variables: variables\n        });\n      },\n      cache: cache\n    }, {\n      loading: {\n        get: function () {\n          return loading.current;\n        }\n      },\n      error: {\n        get: function () {\n          return error.current;\n        }\n      },\n      data: {\n        get: function () {\n          return data.current;\n        }\n      }\n    });\n  }, [makeFetch]);\n  var response = useMemo(function () {\n    return toResponseObject(res, data);\n  }, []); // onMount/onUpdate\n\n  useEffect(function () {\n    mounted.current = true;\n\n    if (Array.isArray(dependencies)) {\n      var methodName = requestInit.method || HTTPMethod.GET;\n      var methodLower = methodName.toLowerCase();\n      var req = request[methodLower];\n      req();\n    }\n\n    return function () {\n      return mounted.current = false;\n    };\n  }, dependencies); // Cancel any running request when unmounting to avoid updating state after component has unmounted\n  // This can happen if a request's promise resolves after component unmounts\n\n  useEffect(function () {\n    return request.abort;\n  }, []);\n\n  if (suspense && suspender.current) {\n    if (isServer) throw new Error('Suspense on server side is not yet supported! ðŸ™…â€â™‚ï¸');\n\n    switch (suspenseStatus.current) {\n      case 'pending':\n        throw suspender.current;\n\n      case 'error':\n        throw error.current;\n    }\n  }\n\n  return Object.assign([request, response, loading.current, error.current], __assign(__assign({\n    request: request,\n    response: response\n  }, request), {\n    loading: loading.current,\n    data: data.current,\n    error: error.current\n  }));\n}\n\nexport { useFetch };\nexport default useFetch;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","useEffect","useCallback","useRef","useReducer","useMemo","useSSR","useRefState","HTTPMethod","CachePolicies","useFetchArgs","doFetchArgs","invariant","tryGetData","toResponseObject","useDeepCallback","isFunction","sleep","makeError","useCache","CACHE_FIRST","useFetch","_this","args","_i","_a","host","path","customOptions","requestInit","dependencies","cacheLife","cachePolicy","interceptors","onAbort","onError","onNewData","onTimeout","perPage","persist","responseType","retries","retryDelay","retryOn","suspense","timeout","defaults","cache","isServer","controller","res","data","timedout","attempt","error","hasMore","suspenseStatus","suspender","mounted","_b","loading","setLoading","forceUpdate","makeFetch","method","doFetch","routeOrBody","theController","url","options","response","timer","newData","newRes","_c","opts","shouldRetry","_d","_e","theData","err_1","_f","_g","_h","current","AbortController","signal","onabort","request","undefined","setTimeout","abort","isCached","cached","fetch","clone","Array","isArray","ok","includes","status","retry","set","id","name","clearTimeout","statusText","delay","d","Number","isInteger","console","post","POST","del","DELETE","defineProperties","get","GET","patch","PATCH","put","PUT","OPTIONS","head","HEAD","connect","CONNECT","trace","TRACE","delete","query","variables","mutate","mutation","methodName","methodLower","toLowerCase","req","Error"],"sources":["/Users/santiagotonoli/Desktop/portfolio/React-TypeScript-Portfolio/node_modules/use-http/dist/esm/useFetch.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useEffect, useCallback, useRef, useReducer, useMemo } from 'react';\nimport useSSR from 'use-ssr';\nimport useRefState from 'urs';\nimport { HTTPMethod, CachePolicies } from './types';\nimport useFetchArgs from './useFetchArgs';\nimport doFetchArgs from './doFetchArgs';\nimport { invariant, tryGetData, toResponseObject, useDeepCallback, isFunction, sleep, makeError } from './utils';\nimport useCache from './useCache';\nvar CACHE_FIRST = CachePolicies.CACHE_FIRST;\nfunction useFetch() {\n    var _this = this;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var _a = useFetchArgs.apply(void 0, args), host = _a.host, path = _a.path, customOptions = _a.customOptions, requestInit = _a.requestInit, dependencies = _a.dependencies;\n    var cacheLife = customOptions.cacheLife, cachePolicy = customOptions.cachePolicy, // 'cache-first' by default\n    interceptors = customOptions.interceptors, onAbort = customOptions.onAbort, onError = customOptions.onError, onNewData = customOptions.onNewData, onTimeout = customOptions.onTimeout, perPage = customOptions.perPage, persist = customOptions.persist, responseType = customOptions.responseType, retries = customOptions.retries, retryDelay = customOptions.retryDelay, retryOn = customOptions.retryOn, suspense = customOptions.suspense, timeout = customOptions.timeout, defaults = __rest(customOptions, [\"cacheLife\", \"cachePolicy\", \"interceptors\", \"onAbort\", \"onError\", \"onNewData\", \"onTimeout\", \"perPage\", \"persist\", \"responseType\", \"retries\", \"retryDelay\", \"retryOn\", \"suspense\", \"timeout\"]);\n    var cache = useCache({ persist: persist, cacheLife: cacheLife, cachePolicy: cachePolicy });\n    var isServer = useSSR().isServer;\n    var controller = useRef();\n    var res = useRef({});\n    var data = useRef(defaults.data);\n    var timedout = useRef(false);\n    var attempt = useRef(0);\n    var error = useRef();\n    var hasMore = useRef(true);\n    var suspenseStatus = useRef('pending');\n    var suspender = useRef();\n    var mounted = useRef(false);\n    var _b = useRefState(defaults.loading), loading = _b[0], setLoading = _b[1];\n    var forceUpdate = useReducer(function () { return ({}); }, [])[1];\n    var makeFetch = useDeepCallback(function (method) {\n        var doFetch = function (routeOrBody, body) { return __awaiter(_this, void 0, void 0, function () {\n            var theController, _a, url, options, response, timer, newData, newRes, _b, _c, opts, shouldRetry, _d, _e, theData, err_1, opts, shouldRetry, _f, _g, theData;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0:\n                        if (isServer)\n                            return [2 /*return*/]; // for now, we don't do anything on the server\n                        controller.current = new AbortController();\n                        controller.current.signal.onabort = onAbort;\n                        theController = controller.current;\n                        return [4 /*yield*/, doFetchArgs(requestInit, method, theController, cacheLife, cache, host, path, routeOrBody, body, interceptors.request)];\n                    case 1:\n                        _a = _h.sent(), url = _a.url, options = _a.options, response = _a.response;\n                        error.current = undefined;\n                        // don't perform the request if there is no more data to fetch (pagination)\n                        if (perPage > 0 && !hasMore.current && !error.current)\n                            return [2 /*return*/, data.current];\n                        if (!suspense)\n                            setLoading(true);\n                        timer = timeout && setTimeout(function () {\n                            timedout.current = true;\n                            theController.abort();\n                            if (onTimeout)\n                                onTimeout();\n                        }, timeout);\n                        _h.label = 2;\n                    case 2:\n                        _h.trys.push([2, 17, 23, 24]);\n                        if (!(response.isCached && cachePolicy === CACHE_FIRST)) return [3 /*break*/, 3];\n                        newRes = response.cached;\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, fetch(url, options)];\n                    case 4:\n                        newRes = (_h.sent()).clone();\n                        _h.label = 5;\n                    case 5:\n                        res.current = newRes.clone();\n                        return [4 /*yield*/, tryGetData(newRes, defaults.data, responseType)];\n                    case 6:\n                        newData = _h.sent();\n                        res.current.data = onNewData(data.current, newData);\n                        _b = res;\n                        if (!interceptors.response) return [3 /*break*/, 8];\n                        return [4 /*yield*/, interceptors.response({ response: res.current })];\n                    case 7:\n                        _c = _h.sent();\n                        return [3 /*break*/, 9];\n                    case 8:\n                        _c = res.current;\n                        _h.label = 9;\n                    case 9:\n                        _b.current = _c;\n                        invariant('data' in res.current, 'You must have `data` field on the Response returned from your `interceptors.response`');\n                        data.current = res.current.data;\n                        opts = { attempt: attempt.current, response: newRes };\n                        // if we just have `retries` set with NO `retryOn` then\n                        // automatically retry on fail until attempts run out\n                        _d = !isFunction(retryOn) && Array.isArray(retryOn) && retryOn.length < 1 && (newRes === null || newRes === void 0 ? void 0 : newRes.ok) === false\n                            // otherwise only retry when is specified\n                            || Array.isArray(retryOn) && retryOn.includes(newRes.status);\n                        if (_d) \n                        // if we just have `retries` set with NO `retryOn` then\n                        // automatically retry on fail until attempts run out\n                        return [3 /*break*/, 12];\n                        _e = isFunction(retryOn);\n                        if (!_e) return [3 /*break*/, 11];\n                        return [4 /*yield*/, retryOn(opts)];\n                    case 10:\n                        _e = (_h.sent());\n                        _h.label = 11;\n                    case 11:\n                        _d = _e;\n                        _h.label = 12;\n                    case 12:\n                        shouldRetry = (_d) && retries > 0 && retries > attempt.current;\n                        if (!shouldRetry) return [3 /*break*/, 14];\n                        return [4 /*yield*/, retry(opts, routeOrBody, body)];\n                    case 13:\n                        theData = _h.sent();\n                        return [2 /*return*/, theData];\n                    case 14:\n                        if (!(cachePolicy === CACHE_FIRST)) return [3 /*break*/, 16];\n                        return [4 /*yield*/, cache.set(response.id, newRes.clone())];\n                    case 15:\n                        _h.sent();\n                        _h.label = 16;\n                    case 16:\n                        if (Array.isArray(data.current) && !!(data.current.length % perPage))\n                            hasMore.current = false;\n                        return [3 /*break*/, 24];\n                    case 17:\n                        err_1 = _h.sent();\n                        if (attempt.current >= retries && timedout.current)\n                            error.current = makeError('AbortError', 'Timeout Error');\n                        opts = { attempt: attempt.current, error: err_1 };\n                        // if we just have `retries` set with NO `retryOn` then\n                        // automatically retry on fail until attempts run out\n                        _f = !isFunction(retryOn) && Array.isArray(retryOn) && retryOn.length < 1;\n                        if (_f) \n                        // if we just have `retries` set with NO `retryOn` then\n                        // automatically retry on fail until attempts run out\n                        return [3 /*break*/, 20];\n                        _g = isFunction(retryOn);\n                        if (!_g) return [3 /*break*/, 19];\n                        return [4 /*yield*/, retryOn(opts)];\n                    case 18:\n                        _g = (_h.sent());\n                        _h.label = 19;\n                    case 19:\n                        _f = _g;\n                        _h.label = 20;\n                    case 20:\n                        shouldRetry = (_f) && retries > 0 && retries > attempt.current;\n                        if (!shouldRetry) return [3 /*break*/, 22];\n                        return [4 /*yield*/, retry(opts, routeOrBody, body)];\n                    case 21:\n                        theData = _h.sent();\n                        return [2 /*return*/, theData];\n                    case 22:\n                        if (err_1.name !== 'AbortError') {\n                            error.current = err_1;\n                        }\n                        return [3 /*break*/, 24];\n                    case 23:\n                        timedout.current = false;\n                        if (timer)\n                            clearTimeout(timer);\n                        controller.current = undefined;\n                        return [7 /*endfinally*/];\n                    case 24:\n                        if (newRes && !newRes.ok && !error.current)\n                            error.current = makeError(newRes.status, newRes.statusText);\n                        if (!suspense)\n                            setLoading(false);\n                        if (attempt.current === retries)\n                            attempt.current = 0;\n                        if (error.current)\n                            onError({ error: error.current });\n                        return [2 /*return*/, data.current];\n                }\n            });\n        }); }; // end of doFetch()\n        var retry = function (opts, routeOrBody, body) { return __awaiter(_this, void 0, void 0, function () {\n            var delay, d;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        delay = (isFunction(retryDelay) ? retryDelay(opts) : retryDelay);\n                        if (!(Number.isInteger(delay) && delay >= 0)) {\n                            console.error('retryDelay must be a number >= 0! If you\\'re using it as a function, it must also return a number >= 0.');\n                        }\n                        attempt.current++;\n                        if (!delay) return [3 /*break*/, 2];\n                        return [4 /*yield*/, sleep(delay)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [4 /*yield*/, doFetch(routeOrBody, body)];\n                    case 3:\n                        d = _a.sent();\n                        return [2 /*return*/, d];\n                }\n            });\n        }); };\n        if (suspense) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return __awaiter(_this, void 0, void 0, function () {\n                    var newData;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                suspender.current = doFetch.apply(void 0, args).then(function (newData) {\n                                    suspenseStatus.current = 'success';\n                                    return newData;\n                                }, function () {\n                                    suspenseStatus.current = 'error';\n                                });\n                                forceUpdate();\n                                return [4 /*yield*/, suspender.current];\n                            case 1:\n                                newData = _a.sent();\n                                return [2 /*return*/, newData];\n                        }\n                    });\n                });\n            };\n        }\n        return doFetch;\n    }, [isServer, onAbort, requestInit, host, path, interceptors, cachePolicy, perPage, timeout, persist, cacheLife, onTimeout, defaults.data, onNewData, forceUpdate, suspense]);\n    var post = useCallback(makeFetch(HTTPMethod.POST), [makeFetch]);\n    var del = useCallback(makeFetch(HTTPMethod.DELETE), [makeFetch]);\n    var request = useMemo(function () { return Object.defineProperties({\n        get: makeFetch(HTTPMethod.GET),\n        post: post,\n        patch: makeFetch(HTTPMethod.PATCH),\n        put: makeFetch(HTTPMethod.PUT),\n        options: makeFetch(HTTPMethod.OPTIONS),\n        head: makeFetch(HTTPMethod.HEAD),\n        connect: makeFetch(HTTPMethod.CONNECT),\n        trace: makeFetch(HTTPMethod.TRACE),\n        del: del,\n        delete: del,\n        abort: function () { return controller.current && controller.current.abort(); },\n        query: function (query, variables) { return post({ query: query, variables: variables }); },\n        mutate: function (mutation, variables) { return post({ mutation: mutation, variables: variables }); },\n        cache: cache\n    }, {\n        loading: { get: function () { return loading.current; } },\n        error: { get: function () { return error.current; } },\n        data: { get: function () { return data.current; } },\n    }); }, [makeFetch]);\n    var response = useMemo(function () { return toResponseObject(res, data); }, []);\n    // onMount/onUpdate\n    useEffect(function () {\n        mounted.current = true;\n        if (Array.isArray(dependencies)) {\n            var methodName = requestInit.method || HTTPMethod.GET;\n            var methodLower = methodName.toLowerCase();\n            var req = request[methodLower];\n            req();\n        }\n        return function () { return mounted.current = false; };\n    }, dependencies);\n    // Cancel any running request when unmounting to avoid updating state after component has unmounted\n    // This can happen if a request's promise resolves after component unmounts\n    useEffect(function () { return request.abort; }, []);\n    if (suspense && suspender.current) {\n        if (isServer)\n            throw new Error('Suspense on server side is not yet supported! ðŸ™…â€â™‚ï¸');\n        switch (suspenseStatus.current) {\n            case 'pending':\n                throw suspender.current;\n            case 'error':\n                throw error.current;\n        }\n    }\n    return Object.assign([request, response, loading.current, error.current], __assign(__assign({ request: request, response: response }, request), { loading: loading.current, data: data.current, error: error.current }));\n}\nexport { useFetch };\nexport default useFetch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}