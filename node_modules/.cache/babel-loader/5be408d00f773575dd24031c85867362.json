{"ast":null,"code":"import { detectBrowser, focus, isActiveElement, isRefObject } from \"@chakra-ui/utils\";\nimport { usePointerEvent } from \"./use-pointer-event\";\n/**\n * Polyfill to get `relatedTarget` working correctly consistently\n * across all browsers.\n *\n * It ensures that elements receives focus on pointer down if\n * it's not the active active element.\n *\n * @internal\n */\n\nexport function useFocusOnPointerDown(props) {\n  var {\n    doc,\n    elements\n  } = props;\n  var isSafari = detectBrowser(\"Safari\");\n  usePointerEvent(doc, \"pointerdown\", event => {\n    if (!isSafari) return;\n    var target = event.target;\n    var isValidTarget = elements.some(element => {\n      if (isRefObject(element)) {\n        return target === element.current;\n      }\n\n      return target === element;\n    });\n\n    if (!isActiveElement(target) && isValidTarget) {\n      focus(target);\n    }\n  });\n}","map":{"version":3,"mappings":"AAAA,SACEA,aADF,EAEEC,KAFF,EAGEC,eAHF,EAIEC,WAJF,QAKO,kBALP;AAOA,SAASC,eAAT,QAAgC,qBAAhC;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,qBAAT,CAA+BC,KAA/B,EAAgE;EACrE,IAAM;IAAEC,GAAF;IAAOC;EAAP,IAAoBF,KAA1B;EAEA,IAAMG,QAAQ,GAAGT,aAAa,CAAC,QAAD,CAA9B;EAEAI,eAAe,CAACG,GAAD,EAAM,aAAN,EAAsBG,KAAD,IAAW;IAC7C,IAAI,CAACD,QAAL,EAAe;IACf,IAAME,MAAM,GAAGD,KAAK,CAACC,MAArB;IACA,IAAMC,aAAa,GAAGJ,QAAQ,CAACK,IAATL,CAAeM,OAAD,IAAa;MAC/C,IAAIX,WAAW,CAACW,OAAD,CAAf,EAA0B;QACxB,OAAOH,MAAM,KAAKG,OAAO,CAACC,OAA1B;MACD;;MACD,OAAOJ,MAAM,KAAKG,OAAlB;IAJoB,EAAtB;;IAOA,IAAI,CAACZ,eAAe,CAACS,MAAD,CAAhB,IAA4BC,aAAhC,EAA+C;MAC7CX,KAAK,CAACU,MAAD,CAALV;IACD;EAZY,EAAfG;AAcD","names":["detectBrowser","focus","isActiveElement","isRefObject","usePointerEvent","useFocusOnPointerDown","props","doc","elements","isSafari","event","target","isValidTarget","some","element","current"],"sources":["../../src/use-focus-on-pointerdown.ts"],"sourcesContent":["import {\n  detectBrowser,\n  focus,\n  isActiveElement,\n  isRefObject,\n} from \"@chakra-ui/utils\"\nimport { RefObject } from \"react\"\nimport { usePointerEvent } from \"./use-pointer-event\"\n\nexport interface UseFocusOnMouseDownProps {\n  doc: Document | null\n  elements: Array<RefObject<HTMLElement> | HTMLElement | null>\n}\n\n/**\n * Polyfill to get `relatedTarget` working correctly consistently\n * across all browsers.\n *\n * It ensures that elements receives focus on pointer down if\n * it's not the active active element.\n *\n * @internal\n */\nexport function useFocusOnPointerDown(props: UseFocusOnMouseDownProps) {\n  const { doc, elements } = props\n\n  const isSafari = detectBrowser(\"Safari\")\n\n  usePointerEvent(doc, \"pointerdown\", (event) => {\n    if (!isSafari) return\n    const target = event.target as HTMLElement\n    const isValidTarget = elements.some((element) => {\n      if (isRefObject(element)) {\n        return target === element.current\n      }\n      return target === element\n    })\n\n    if (!isActiveElement(target) && isValidTarget) {\n      focus(target)\n    }\n  })\n}\n"]},"metadata":{},"sourceType":"module"}