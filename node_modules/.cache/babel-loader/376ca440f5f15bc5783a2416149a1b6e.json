{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport { filterUndefined } from \"@chakra-ui/utils\";\nimport { createPopper } from \"@popperjs/core\";\nimport { useCallback, useEffect, useMemo, useRef } from \"react\";\nimport * as popperModifiers from \"./modifiers\";\nimport { getEventListenerOptions } from \"./utils\";\nvar defaultProps = {\n  placement: \"bottom\",\n  strategy: \"absolute\",\n  flip: true,\n  gutter: 8,\n  arrowPadding: 8,\n  preventOverflow: true,\n  eventListeners: true,\n  modifiers: [],\n  boundary: \"clippingParents\"\n};\nexport function usePopper(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var opts = Object.assign({}, defaultProps, filterUndefined(props));\n  var {\n    modifiers = [],\n    placement: placementProp,\n    strategy,\n    arrowPadding,\n    eventListeners,\n    offset,\n    gutter,\n    flip,\n    boundary,\n    preventOverflow,\n    matchWidth\n  } = opts;\n  var reference = useRef(null);\n  var popper = useRef(null);\n  var instanceRef = useRef(null);\n  var cleanup = useRef(() => {});\n  var setupPopper = useCallback(() => {\n    if (!reference.current || !popper.current) return;\n    cleanup.current == null ? void 0 : cleanup.current();\n    instanceRef.current = createPopper(reference.current, popper.current, {\n      placement: placementProp,\n      modifiers: modifiers.concat([popperModifiers.innerArrow, popperModifiers.positionArrow, popperModifiers.transformOrigin, _extends({}, popperModifiers.matchWidth, {\n        enabled: !!matchWidth\n      }), _extends({\n        name: \"eventListeners\"\n      }, getEventListenerOptions(eventListeners)), {\n        name: \"arrow\",\n        options: {\n          padding: arrowPadding\n        }\n      }, {\n        name: \"offset\",\n        options: {\n          offset: offset != null ? offset : [0, gutter]\n        }\n      }, {\n        name: \"flip\",\n        enabled: !!flip,\n        options: {\n          padding: 8\n        }\n      }, {\n        name: \"preventOverflow\",\n        enabled: !!preventOverflow,\n        options: {\n          boundary\n        }\n      }]),\n      strategy\n    }); // force update one-time to fix any positioning issues\n\n    instanceRef.current.forceUpdate();\n    cleanup.current = instanceRef.current.destroy;\n  }, [placementProp, modifiers, matchWidth, eventListeners, arrowPadding, offset, gutter, flip, preventOverflow, boundary, strategy]);\n  useEffect(() => {\n    return () => {\n      var _instanceRef$current;\n\n      (_instanceRef$current = instanceRef.current) == null ? void 0 : _instanceRef$current.destroy();\n      instanceRef.current = null;\n    };\n  }, []);\n  return useMemo(() => {\n    var _instanceRef$current2, _instanceRef$current3;\n\n    return {\n      update: (_instanceRef$current2 = instanceRef.current) == null ? void 0 : _instanceRef$current2.update,\n      forceUpdate: (_instanceRef$current3 = instanceRef.current) == null ? void 0 : _instanceRef$current3.forceUpdate,\n      referenceRef: node => {\n        reference.current = node;\n        setupPopper();\n      },\n      popperRef: node => {\n        popper.current = node;\n        setupPopper();\n      }\n    };\n  }, [setupPopper]);\n}","map":{"version":3,"mappings":"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","names":["filterUndefined","createPopper","useCallback","useEffect","useMemo","useRef","popperModifiers","getEventListenerOptions","defaultProps","placement","strategy","flip","gutter","arrowPadding","preventOverflow","eventListeners","modifiers","boundary","usePopper","props","opts","Object","assign","placementProp","offset","matchWidth","reference","popper","instanceRef","cleanup","setupPopper","current","concat","innerArrow","positionArrow","transformOrigin","enabled","name","options","padding","forceUpdate","destroy","update","_instanceRef$current2","_instanceRef$current3","referenceRef","node","popperRef"],"sources":["../../src/use-popper.ts"],"sourcesContent":["import { filterUndefined } from \"@chakra-ui/utils\"\nimport {\n  createPopper,\n  Instance,\n  Modifier,\n  Placement,\n  VirtualElement,\n} from \"@popperjs/core\"\nimport { useCallback, useEffect, useMemo, useRef } from \"react\"\nimport * as popperModifiers from \"./modifiers\"\nimport { getEventListenerOptions } from \"./utils\"\n\nexport type { Placement }\n\nexport interface UsePopperProps {\n  offset?: [x: number, y: number]\n  gutter?: number\n  preventOverflow?: boolean\n  flip?: boolean\n  matchWidth?: boolean\n  boundary?: \"clippingParents\" | \"scrollParent\" | HTMLElement\n  eventListeners?: boolean | { scroll?: boolean; resize?: boolean }\n  arrowPadding?: number\n  strategy?: \"absolute\" | \"fixed\"\n  placement?: Placement\n  modifiers?: Array<Partial<Modifier<string, any>>>\n}\n\nconst defaultProps: UsePopperProps = {\n  placement: \"bottom\",\n  strategy: \"absolute\",\n  flip: true,\n  gutter: 8,\n  arrowPadding: 8,\n  preventOverflow: true,\n  eventListeners: true,\n  modifiers: [],\n  boundary: \"clippingParents\",\n}\n\nexport function usePopper(props: UsePopperProps = {}) {\n  const opts = Object.assign({}, defaultProps, filterUndefined(props))\n  const {\n    modifiers = [],\n    placement: placementProp,\n    strategy,\n    arrowPadding,\n    eventListeners,\n    offset,\n    gutter,\n    flip,\n    boundary,\n    preventOverflow,\n    matchWidth,\n  } = opts\n\n  const reference = useRef<Element | VirtualElement | null>(null)\n  const popper = useRef<HTMLElement | null>(null)\n  const instanceRef = useRef<Instance | null>(null)\n\n  const cleanup = useRef(() => {})\n\n  const setupPopper = useCallback(() => {\n    if (!reference.current || !popper.current) return\n    cleanup.current?.()\n\n    instanceRef.current = createPopper(reference.current, popper.current, {\n      placement: placementProp,\n      modifiers: modifiers.concat([\n        popperModifiers.innerArrow,\n        popperModifiers.positionArrow,\n        popperModifiers.transformOrigin,\n        { ...popperModifiers.matchWidth, enabled: !!matchWidth },\n        {\n          name: \"eventListeners\",\n          ...getEventListenerOptions(eventListeners),\n        },\n        {\n          name: \"arrow\",\n          options: { padding: arrowPadding },\n        },\n        {\n          name: \"offset\",\n          options: {\n            offset: offset ?? [0, gutter],\n          },\n        },\n        {\n          name: \"flip\",\n          enabled: !!flip,\n          options: { padding: 8 },\n        },\n        {\n          name: \"preventOverflow\",\n          enabled: !!preventOverflow,\n          options: { boundary },\n        },\n      ]),\n      strategy,\n    })\n\n    // force update one-time to fix any positioning issues\n    instanceRef.current.forceUpdate()\n\n    cleanup.current = instanceRef.current.destroy\n  }, [\n    placementProp,\n    modifiers,\n    matchWidth,\n    eventListeners,\n    arrowPadding,\n    offset,\n    gutter,\n    flip,\n    preventOverflow,\n    boundary,\n    strategy,\n  ])\n\n  useEffect(() => {\n    return () => {\n      instanceRef.current?.destroy()\n      instanceRef.current = null\n    }\n  }, [])\n\n  return useMemo(\n    () => ({\n      update: instanceRef.current?.update,\n      forceUpdate: instanceRef.current?.forceUpdate,\n      referenceRef: <T extends Element | VirtualElement>(node: T | null) => {\n        reference.current = node\n        setupPopper()\n      },\n      popperRef: <T extends HTMLElement>(node: T | null) => {\n        popper.current = node\n        setupPopper()\n      },\n    }),\n    [setupPopper],\n  )\n}\n\nexport type UsePopperReturn = ReturnType<typeof usePopper>\n"]},"metadata":{},"sourceType":"module"}